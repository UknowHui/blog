---
title: 自动引用计数
slug: ARC
date: 2018-05-25
categories:
- iOS
- home
tags:
- iOS
---

<!--more-->
### 什么是自动引用计数

ARC(Automatic Reference Counting)是指内存管理中对引用采取自动计数的技术，无需再次键入`retain`或者`release`代码，这在降低程序崩溃、内存泄漏等风险的同时，很大程度上减少了开发程序的开发量。编译器完全清楚目标对象，并能立刻释放那些不再被使用的对象。如此一来，应用程序将具有可预测性，且能顺畅运行，速度也将大幅提升。

### 概述
 
1. 第一个人进入办公室，“需要照明的人数”加1，计数值从0变成1，因此要开灯。
2. 之后每当有人进入办公室，“需要照明的人数”就加1，如计数值从1变成2。
3. 每当有人下班离开办公室，“需要照明的人数”就减1，如计数值从2变成1.
4. 最后一个人下班离开办公室时，“需要照明的人数”减1，计数值从1变成0，因此要关灯。

---
表1-1

 对照明设备所做的动作 | 对Objective-C对象所做的动作 
 --------------    | ---------------------
 开灯              | 生成对象
 需要照明           | 持有对象
 不需要照明         | 释放对象
 关灯              | 废弃对象

### 内存管理
- 自己生成的对象，自己所持有
- 非自己生成的对象，自己也能持有
- 不再需要自己持有对象时释放
- 非自己持有的对象无法释放

---
表1-2

 对象操作        | Objective-C方法 
 --------------- | ---------------
 生成并持有对象   | alloc/new/copy/mutableCopy
 持有对象        | retain
 释放对象        | release
 废弃对象        | dealloc